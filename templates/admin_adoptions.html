<h2>Adoption Requests</h2>

{% if requests %}
<table border="1">
  <tr>
    <th>ID</th>
    <th>Report ID</th>
    <th>Name</th>
    <th>Phone</th>
    <th>Message</th>
    <th>Status</th>
  </tr>

  {% for r in requests %}
  <tr>
    <td>{{ r[0] }}</td>
    <td>{{ r[1] }}</td>
    <td>{{ r[2] }}</td>
    <td>{{ r[3] }}</td>
    <td>{{ r[4] or "â€”" }}</td>

    <!-- STATUS UPDATE FORM MUST BE INSIDE LOOP -->
    <td>
      <form method="POST" action="/admin/adoption_update">
        <input type="hidden" name="request_id" value="{{ r[0] }}">
        <select name="status">
          <option value="Pending" {% if r[5] == 'Pending' %}selected{% endif %}>Pending</option>
          <option value="Approved" {% if r[5] == 'Approved' %}selected{% endif %}>Approved</option>
          <option value="Rejected" {% if r[5] == 'Rejected' %}selected{% endif %}>Rejected</option>
        </select>
        <button type="submit">Update</button>
      </form>
    </td>
  </tr>
  {% endfor %}
</table>
{% else %}
<p>No adoption requests yet.</p>
{% endif %}
